# P2P Remote Desktop

TypeScriptとWebRTCを使用したP2Pリモートデスクトップアプリケーション

## 📋 概要

このアプリケーションは、Socket.IOによるシグナリングサーバーとWebRTCによるP2P通信を組み合わせて、ブラウザ間でリアルタイムテキストメッセージ通信を行います。

### 特徴
- 🔗 Socket.IOによるシグナリング
- 🌐 WebRTCによるP2P通信
- 💬 リアルタイムテキストメッセージ
- 👥 複数クライアント対応
- 📱 独立クライアント（HTMLファイルのみ）

## 🚀 使用方法

### 1. サーバー起動

```bash
# 依存関係をインストール（初回のみ）
npm install

# サーバーをビルド
npm run build

# サーバーを起動
npm start
```

サーバーが起動すると、接続用IPアドレスが表示されます：

```
============================================================
🚀 P2P Remote Desktop Server Started!
============================================================
📡 Server running on port 8080

📱 クライアント接続用IPアドレス:
   🌐 172.17.0.3:8080

📂 独立クライアントファイル:
   📄 /app/p2pdesk/client/index.html

💡 使用方法:
   1. client/index.html をブラウザで開く
   2. 上記のIPアドレスの一つを入力
   3. 接続ボタンをクリック
============================================================
```

### 2. クライアント接続

1. `client/index.html` をブラウザで開く
2. サーバーで表示されたIPアドレス（例：`172.17.0.3:8080`）を入力
3. 「接続」ボタンをクリック
4. 複数のブラウザタブ/ウィンドウで同様に接続
5. テキストメッセージを送信してP2P通信をテスト

### 3. クライアント起動スクリプト（オプション）

```bash
# クライアント用の簡単起動スクリプト
./client/start-client.sh
```

## 📁 プロジェクト構造

```
p2pdesk/
├── src/
│   └── server.ts           # Socket.IOシグナリングサーバー
├── client/
│   ├── index.html         # 独立クライアント（ブラウザで直接開く）
│   └── start-client.sh    # クライアント起動スクリプト
├── dist/
│   └── server.js          # コンパイル済みサーバー
├── package.json           # Node.js依存関係
├── tsconfig.json          # TypeScript設定
└── README.md              # このファイル
```

## 🛠 開発コマンド

```bash
# 開発モードでサーバーを起動（ホットリロード）
npm run dev

# TypeScriptをコンパイル
npm run build

# 本番モードでサーバーを起動
npm start
```

## 🔧 技術スタック

- **バックエンド**: Node.js + TypeScript + Socket.IO + Express
- **フロントエンド**: Pure HTML/CSS/JavaScript + Socket.IO Client + WebRTC
- **通信**: Socket.IO（シグナリング） + WebRTC（P2P）

## 📡 ネットワーク設定

- **デフォルトポート**: 8080
- **CORS**: 全てのオリジンを許可（開発用設定）
- **IP バインド**: 0.0.0.0（全てのネットワークインターフェース）

## 🐳 Docker使用時

WSL + Dockerコンテナで実行している場合：

1. コンテナ内でサーバーを起動
2. 表示されたIPアドレス（例：172.17.0.3:8080）をメモ
3. ホストOS（Windows）のブラウザで`client/index.html`を開く
4. メモしたIPアドレスを入力して接続

## 🚨 注意事項

- このアプリケーションは開発/テスト用です
- 本番環境では適切なセキュリティ設定が必要です
- HTTPS環境でないとWebRTCの一部機能が制限される場合があります

## 📝 今後の拡張予定

- [ ] 画面共有機能（getDisplayMedia API）
- [ ] 音声/ビデオ通話（getUserMedia API）
- [ ] ファイル転送機能
- [ ] リモート制御機能
- [ ] 認証・セキュリティ機能